/* jce - 2.6.35 | 2018-12-19 | https://www.joomlacontenteditor.net | Copyright (C) 2006 - 2018 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
!function($,Wf){Joomla.submitbutton=submitbutton=function(button){if("cancelEdit"!=button){Wf.profiles.onSubmit();try{Joomla.submitform(button)}catch(e){submitform(button)}}else try{Joomla.submitform(button)}catch(e){submitform(button)}},Wf.profiles={options:{},init:function(){var self=this,init=!0;"rtl"==$("body").css("direction")?"right":"left";$("#tabs, #tabs-editor").tabs().on("tabs:activate",function(e,tab){$(tab).addClass("active").siblings().removeClass("active")}),$("#tabs-plugins").tabs().on("tabs:activate",function(e,tab){$(tab).addClass("active").siblings().removeClass("active")}).find("ul.ui-tabs-nav > li.ui-state-default").not(".tab-disabled").first().addClass("active").children("a.ui-tabs-anchor").click(),$("input.checkbox-list-toggle-all").click(function(){$('input[type="checkbox"]',"#user-groups").prop("checked",this.checked).trigger("check")}),$('input[name="components-select"]').click(function(){$('input[type="checkbox"]',"#components").prop("disabled","all"==this.value).trigger("disable").filter(":checked").prop("checked",!1).trigger("check")}),$("select.editable, select.combobox").datalist(),$("input.color").colorpicker($.extend(this.options.colorpicker,{parent:".ui-jce"})).next(".colorpicker_widget").wrap('<span class="add-on" />'),$('.extensions > input[type="text"][name]').extensionmapper(),this.createLayout(),$("select.checklist, input.checklist").checkList({onCheck:function(){self.setRows()}}),$("#paramseditorwidth").change(function(){var v=$(this).val()||"100%";/%/.test(v)?(v=Math.min(parseInt(v),100),v+="%",s=v,$(".widthMarker").css("max-width",v)):(v=parseInt(v),s=v+"px"),$(".widthMarker span","#profileLayoutTable").html(s),$(".mceLayout").css("max-width",v)}),$("#paramseditorheight").change(function(){var v=$(this).val()||"auto";/%/.test(v)?v="auto":"number"==$.type(v)&&(v=parseInt(v))}),$("#paramseditortoolbar_theme").change(function(){var v=$(this).val();if(v.indexOf(".")!=-1){v=v.split(".");var s=v[0]+"Skin",c=v[1];v=s+" "+s+c.charAt(0).toUpperCase()+c.substring(1)}else v+="Skin";$(".profileLayoutContainer .mceEditor").attr("class",function(i,value){return $.trim(value.replace(/([a-z0-9]+)Skin([a-z0-9]*)/gi,""))}).addClass("defaultSkin "+v)}),$("#paramseditortoolbar_align").change(function(){var v=$(this).val();$("ul.sortableList","#toolbar_container").removeClass("mceLeft mceCenter mceRight").addClass("mce"+v.charAt(0).toUpperCase()+v.substring(1)),self._fixLayout()}).change(),$("#paramseditorpath").change(function(){$("span.mceStatusbar span.mcePathLabel").toggle(1==$(this).val())}).change(),$("#profileAdditionalFeatures input:checkbox").click(function(){self.setPlugins()}),$("#paramseditortoolbar_location").change(function(){var $after=$("#editor_container");"top"==$(this).val()&&($after=$("span.widthMarker")),$("#toolbar_container").insertAfter($after)}).change(),$("#paramseditorstatusbar_location").change(function(){var v=$(this).val();$("#statusbar_container").show(),"none"==v&&$("#statusbar_container").hide();var $after=$("#editor_container");"top"==v&&($after=$("span.widthMarker"),"top"==$("#paramseditortoolbar_location").val()&&($after=$("#toolbar_container"))),$("#statusbar_container").insertAfter($after)}).change(),$("#paramseditorresizing").change(function(){var v=$(this).val();$("a.mceResize","#statusbar_container").toggle(1==v)}).change(),$("#paramseditortoggle").change(function(){var v=$(this).val();$("#editor_toggle").toggle(1==v)}).change(),$("#paramseditortoggle_label").on("change keyup",function(){this.value&&$("#editor_toggle").text(this.value)}),$("#users").on("click",".users-list-delete",function(e){e.preventDefault(),$(this).parent().remove()}),$("#tabs-features :input[name], #tabs-editor :input[name], #tabs-plugins :input[name]").change(function(){if(!init){var name=this.name.replace('!"#$%&()*+,./:;<=>?@[]^`{|}~',"\\$1","g");$(this).add('[name="'+name+'"]').addClass("isdirty")}}),$("input.plugins-enable-checkbox").on("click",function(){var s=this.checked,name=$(this).data("name"),proxy=$(this).next('input[type="hidden"]');0==$(proxy).length&&(proxy=$('<input type="hidden" name="'+$(this).attr("name")+'" />').insertAfter(this)),$(this).change().val(s?1:0).removeAttr("name"),$(proxy).val(s?1:0).change(),$("select.plugins-default-select",$(this).parents("fieldset:first")).children('option[value="'+name+'"]').prop("disabled",!s).parent().val(function(i,v){return v===name?"":v})}).change(function(){$(this).removeClass("isdirty")}),init=!1},validate:function(){return!0},onSubmit:function(){$("#tabs-features :input[name], #tabs-editor :input[name], #tabs-plugins :input[name]").not(".isdirty").prop("disabled",!0)},_fixLayout:function(){$(".mceToolBarItem").removeClass("mceToolBarItemEnd mceToolBarItemStart"),$(".mceButton, .mceSplitButton").parent().addClass("mceToolBarItemButton"),$(".mceListBox").parent().addClass("mceToolBarItemListBox"),$(".mceListBox").parent().prev(".mceToolBarItemButton").addClass("mceToolBarItemEnd"),$(".mceListBox").parent().next(".mceToolBarItemButton").addClass("mceToolBarItemStart")},createLayout:function(){var self=this;$(".sortableList").sortable({connectWith:".sortableList",axis:"y",update:function(event,ui){self.setRows(),self.setPlugins()},placeholder:"mceToolbarRow sortableListItem ui-sortable-highlight",opacity:.8}),$(".sortableOption").click(function(e){var $parent=$(this).parents(".sortableListItem").first(),$target=$(".sortableList","#profileLayoutTable").not($parent.parent());$parent.appendTo($target),self.setRows(),self.setPlugins()}),$(".sortableRow").sortable({connectWith:".sortableRow",tolerance:"pointer",update:function(event,ui){self.setRows(),self.setPlugins(),self._fixLayout()},start:function(event,ui){$(ui.placeholder).width($(ui.item).width())},opacity:.8,placeholder:"mceToolBarItem sortableRowItem ui-sortable-highlight"}),this._fixLayout()},setRows:function(){var rows=[];$(".sortableRow",".profileLayoutContainerCurrent").has(".sortableRowItem").each(function(){rows.push($.map($(".sortableRowItem",this),function(el){return $(el).data("name")}).join(","))});var v=rows.join(";");$('input[name="rows"]').val(v).change()},setLayout:function(){var $spans=$(".profileLayoutContainerCurrent > span").not(".widthMarker");$.each(["toolbar","editor","statusbar"],function(){$("#paramseditor"+this+"_location").val($spans.index($("#"+this+"_container")))})},setPlugins:function(){var plugins=[];$(".sortableRow .plugin",".profileLayoutContainerCurrent").each(function(){plugins.push($(this).data("name"))}),$("#profileAdditionalFeatures input:checkbox:checked").each(function(){plugins.push($(this).val())}),$('input[name="plugins"]').val(plugins.join(",")).change(),this.setParams(plugins)},setParams:function(plugins){var $tabs=$("div#tabs-plugins > ul.nav.nav-tabs > li");$tabs.removeClass("tab-disabled ui-state-disabled active ui-tabs-active ui-state-active").each(function(i){var name=$(this).data("name"),s=$.inArray(name,plugins)!=-1;$("input[name], select[name]",this).prop("disabled",!s),s||$(this).addClass("tab-disabled")}),$tabs.not(".tab-disabled").first().addClass("active ui-tabs-active ui-state-active").children("a.ui-tabs-anchor").click()}},$(document).ready(function(){Wf.profiles.init()})}(jQuery,Wf),function($){$.fn.extensionmapper=function(options){return this.each(function(){function serialize(){var list=[];$(self).parent().find("dl").each(function(){var v1=$(this).find('dd input[type="checkbox"]').map(function(){return this.checked?this.value:"-"+this.value}).get(),v2=$(this).find(".extension-custom input").map(function(){if(""!==this.value)return this.value}).get(),group=$(this).find("dt").data("extension-group");group=$(this).find('dt input[type="checkbox"]').map(function(){var value=$(this).parents("dt").data("extension-group");if(value)return this.checked?value:"-"+value}).get();var items=$.merge(v1,v2).join(",");group?list.push(group+"="+items):list.push(items)});var v=list.join(";");$input.val(v).addClass("isdirty"),$(self).val(v)}var self=this,$parent=$(self).parent(),$input=$('<input type="hidden" name="'+$(this).attr("name")+'" />').val(this.value).insertAfter(this);$(this).removeAttr("name").prop("disabled",!0),$(this).siblings("button").click(function(e){e.preventDefault(),$(self).siblings("dl").slideToggle()}),$parent.find('input[type="checkbox"]').click(function(){serialize()}),$parent.on("change",".extension-custom input",function(e){e.preventDefault(),$(this).siblings(".file").attr("class","").addClass("file").addClass(this.value),serialize()}),$parent.on("click",".extension-custom .extension-clear",function(e){e.preventDefault(),$(this).siblings("input").val("")}),$parent.find(".extension-add").click(function(e){e.preventDefault();var $p=$(this).parent(),clone=$p.clone();$(clone).find("input").val(""),$(clone).insertAfter($p)}),$parent.on("click",".extension-remove",function(e){e.preventDefault(),$(this).parent().remove(),serialize()}),$("dt",$parent).length&&$("dl",$parent).sortable({axis:"y",items:"> dd",connectWith:".extensions dl",update:function(event,ui){serialize()}})})}}(jQuery),function($){$.fn.checkList=function(options){this.each(function(){return $.CheckList.init(this,options)})},$.CheckList={options:{valueAsClassName:!1,onCheck:$.noop},init:function(el,options){var self=this;$.extend(this.options,options);var ul=document.createElement("ul"),elms=[];"SELECT"==el.nodeName?$("option",el).each(function(){elms.push({name:$(this).html(),value:$(this).val(),selected:$(this).prop("selected"),disabled:$(this).prop("disabled")})}):$.each(el.value.split(","),function(){elms.push({name:this,value:this})}),$(el).hide(),$(ul).addClass("widget-checklist").insertBefore(el),$(el).hasClass("buttonlist")&&$(ul).wrap('<div class="defaultSkin buttonlist" />'),$.each(elms,function(){self.createElement(el,ul,this)}),$(el).hasClass("sortable")&&$(ul).addClass("sortable").sortable({axis:"y",tolerance:"intersect",update:function(event,ui){self.setValue(el,$(ui.item).parent())},placeholder:"ui-state-highlight"})},createElement:function(el,ul,n){var plugin,button,toolbar,self=this,d=document,li=d.createElement("li");if($(li).attr({title:n.value}).appendTo(ul),$(el).hasClass("buttonlist")){var name=el.name,s=name.split(/[^\w]+/);s&&s.length>1&&(plugin=s[1])}plugin&&(toolbar=$("span.profileLayoutContainerToolbar ul","#profileLayoutTable"),button=$('span[data-button="'+n.value+'"]',toolbar)),$('<input type="checkbox" />').addClass("checkbox inline").prop("checked",n.selected).prop("disabled",n.disabled).click(function(){$(this).trigger("checklist:check",this.checked)}).appendTo(li).on("checklist:check",function(e,state){self.setValue(el,ul),button&&$(button).toggle(state),self.options.onCheck.call(self,[this,n])}).val(n.value),$(li).append('<span class="mceToolBarItem"><span class="mceIcon mce_'+n.value+'"></span></span><label class="checkbox inline widget-checklist-'+n.value+'" title="'+n.name+'">'+n.name+"</label>"),button&&$(el).hasClass("buttonlist")&&$("label",li).before($(button).clone())},setValue:function(el,ul,init){var x=$.map($('input[type="checkbox"]:checked',$("li",ul)),function(n){return $(n).val()});if("SELECT"==el.nodeName){$("option",el).each(function(i){var n=$.inArray(this.value,x);n>=0?$(this).attr("selected","selected").prop("selected",!0):$(this).removeAttr("selected").prop("selected",!1)}),el.name=el.name.replace("[]",""),0===x.length?$(el).change().removeClass("isdirty").after('<input type="hidden" name="'+el.name+'" value="" class="isdirty" />'):($(el).change().next('input[type="hidden"]').remove(),el.name+="[]")}else $(el).val(x.join(",")).change()}}}(jQuery),function($){function camelCase(str){return str.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(all,letter){return letter.toUpperCase()})}var previewStyles=["fontFamily","fontSize","fontWeight","textDecoration","textTransform","color","backgroundColor"];$(document).ready(function(){function updateStyles(n,string){$.each(string.split(";"),function(i,s){var kv=$.trim(s).split(":");if(kv.length>1){var k=$.trim(kv[0]),v=$.trim(kv[1]);$.inArray(camelCase(k),previewStyles)!==-1&&$(n).css(k,v)}})}var init=!0;$("div.styleformat-list").on("update",function(){var list=[],v="";$("div.styleformat",this).each(function(){var data={},p=this,x=0;$("div.styleformat-item-title input",p).val()&&$('input[type="text"], select',p).each(function(){var k=$(this).data("key"),v=$(this).val();""!==v&&("element"!==k&&"classes"!==k&&"styles"!==k&&"attributes"!==k||x++,data[k]=v)}),x>0&&!$.isEmptyObject(data)&&list.push(data)}),list.length&&(v=JSON.stringify(list)),init||$('input[type="hidden"]',this).first().val(v).change()}),$('input[type="text"], select',$("div.styleformat")).change(function(){$("div.styleformat-list").trigger("update");var title=$("div.styleformat-item-title input",$(this).parents("div.styleformat")),v=$(this).val();"element"===$(this).data("key")&&($(title).attr("class",""),/^(h[1-6]|em|strong|code|sub|sup)$/.test(v)&&$(title).addClass(v)),"styles"===$(this).data("key")&&($(title).attr("style",""),updateStyles(title,v))}).change(),$("a.close.collapse","div.styleformat").on("click.collapse",function(e){$(this).siblings().not(".styleformat-item-title, .close").toggleClass("hide"),$(this).toggleClass("icon-chevron-up icon-chevron-down")}),$("div.styleformat a.close","div.styleformat-list").not(".plus, .handle, .collapse").click(function(e){1===$("div.styleformat-list div.styleformat").length?($("input, select",this.parentNode).val("").removeAttr("style").removeAttr("class"),$(this.parentNode).hide()):$(this.parentNode).remove(),$("div.styleformat-list").trigger("update"),e.preventDefault()}),$("a.close.plus","div.styleformat-list").click(function(e){var $item=$(this).prev().clone(!0).insertBefore(this).show();$("div",$item).removeClass("hide"),$("a.close.collapse",$item).removeClass("icon-chevron-down").addClass("icon-chevron-up"),$("input, select",$item).val("").removeAttr("style").removeAttr("class").first().focus(),e.preventDefault()}),$("div.styleformat-list").sortable({axis:"y",update:function(event,ui){$("div.styleformat-list").trigger("update")},handle:"a.handle",items:"div.styleformat",placeholder:"styleformat-highlight",start:function(event,ui){$(ui.placeholder).height($(ui.item).height())}}),$("div.styleformat","div.styleformat-list").length>1&&($("div.styleformat div","div.styleformat-list").not("div.styleformat-item-title").addClass("hide"),$("a.close.collapse","div.styleformat-list").removeClass("icon-chevron-up").addClass("icon-chevron-down")),init=!1,$('input[type="hidden"]',"div.styleformat-list").length>1&&$("div.styleformat-list").trigger("update")})}(jQuery),function($){$(document).ready(function(){$("div.fontlist").on("update",function(){var data={},v="";$("li",this).each(function(){var k,v,$checkbox=$("input:checkbox:checked",this);if($checkbox.length){var parts=$checkbox.val().split("=");2===parts.length&&(k=parts[0],v=parts[1])}$(this).hasClass("font-item")&&(k=$("input",this).first().val(),v=$("input",this).last().val()),k&&v&&(data[k]=v)}),$.isEmptyObject(data)||(v=JSON.stringify(data)),$('input[type="hidden"]',this).val(v).change()}),$('input[type="checkbox"]',"div.fontlist").on("click",function(){$("div.fontlist").trigger("update")}),$('input[type="text"]',"div.fontlist").on("change",function(){$("div.fontlist").trigger("update")}),$("a.close","div.fontlist").not(".plus").click(function(e){$(this).parent().remove(),$("div.fontlist").trigger("update"),e.preventDefault()}),$("a.close.plus","div.fontlist").click(function(e){var $item=$("div.fontlist ul li.font-item").last().clone(!0).appendTo("div.fontlist ul").removeClass("hide");$("input",$item).val("").first().focus(),e.preventDefault()}),$("div.fontlist ul li.font-item.hide input").change(function(){$("div.fontlist").trigger("update")}),$("div.fontlist ul").sortable({axis:"y",update:function(event,ui){$("div.fontlist").trigger("update")},placeholder:"fontlist-highlight",start:function(event,ui){$(ui.placeholder).height($(ui.item).height()).width($(ui.item).width())}})})}(jQuery),function($){$(document).ready(function(){$("div.blockformats").on("update",function(){var v=$('li input[type="checkbox"]:checked',this).map(function(){return this.value}).get().join();$('input[type="hidden"]',this).val(v).change()}),$('input[type="checkbox"]',"div.blockformats").on("click",function(){$("div.blockformats").trigger("update")}),$("div.blockformats ul").sortable({axis:"y",update:function(event,ui){$("div.blockformats").trigger("update")},placeholder:"blockformat-highlight",start:function(event,ui){$(ui.placeholder).height($(ui.item).height()).width($(ui.item).width())}})})}(jQuery);