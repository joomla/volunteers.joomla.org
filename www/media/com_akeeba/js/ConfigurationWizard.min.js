/*
 Copyright (c)2006-2022 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Wizard&&(akeeba.Wizard={URLs:{},execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}});
akeeba.Wizard.boot=function(){akeeba.Wizard.execTimes=[30,25,20,14,7,5,3];akeeba.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1];document.getElementById("backup-progress-pane").style.display="block";akeeba.Backup.resetTimeoutBar();akeeba.System.doAjax({act:"ping"},function(){akeeba.Wizard.minExec()},function(){},!1,1E4)};
akeeba.Wizard.minExec=function(a,b){null==a&&(a=0);null==b&&(b=0);akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(1E3*(2*a+5),100);document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(1));document.getElementById("step-minexec").className="akeeba-label--teal";akeeba.System.doAjax({act:"minexec",seconds:a},function(c){b++;3>b?akeeba.Wizard.minExec(a,b):akeeba.Wizard.minExecApply(a)},function(){a+=.5;20<a?
(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEMINEXEC")):akeeba.Wizard.minExec(a,0)},!1,1E3*(2*a+5))};
akeeba.Wizard.minExecApply=function(a){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(25E3,100);document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_SAVEMINEXEC");akeeba.System.doAjax({act:"applyminexec",minexec:a},function(b){document.getElementById("step-minexec").className="akeeba-label--green";akeeba.Wizard.directories()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display=
"block";document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMINEXEC")},!1)};
akeeba.Wizard.directories=function(){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(1E4,100);document.getElementById("backup-substep").innerHTML="";document.getElementById("step-directory").className="akeeba-label--teal";akeeba.System.doAjax({act:"directories"},function(a){a?(document.getElementById("step-directory").className="akeeba-label--green",akeeba.Wizard.database()):(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display=
"block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES"))},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES")},!1)};
akeeba.Wizard.database=function(){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(3E4,50);document.getElementById("backup-substep").innerHTML="";document.getElementById("step-dbopt").className="akeeba-label--teal";akeeba.System.doAjax({act:"database"},function(a){a?(document.getElementById("step-dbopt").className="akeeba-label--green",akeeba.Wizard.maxExec()):(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",
document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT"))},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT")},!1)};
akeeba.Wizard.maxExec=function(){var a=array_shift(akeeba.Wizard.execTimes);empty(akeeba.Wizard.execTimes)||null==a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_EXECTOOLOW")):(akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(1200*a,80),document.getElementById("step-maxexec").className="akeeba-label--teal",
document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(0)),akeeba.System.doAjax({act:"maxexec",seconds:a},function(b){b?akeeba.Wizard.maxExecApply(a):akeeba.Wizard.maxExec()},function(){akeeba.Wizard.maxExec()},!1,38E3))};
akeeba.Wizard.maxExecApply=function(a){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(1E4,100);document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_SAVINGMAXEXEC");akeeba.System.doAjax({act:"applymaxexec",seconds:a},function(){document.getElementById("step-maxexec").className="akeeba-label--green";akeeba.Wizard.partSize()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display=
"block";document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMAXEXEC")})};
akeeba.Wizard.partSize=function(){akeeba.Backup.resetTimeoutBar();var a=array_shift(akeeba.Wizard.blockSizes);if(empty(akeeba.Wizard.blockSizes)||null==a)document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEPARTSIZE");else{var b=a/8;akeeba.Backup.startTimeoutBar(3E4,100);document.getElementById("backup-substep").textContent=
akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_PARTSIZE").replace("%s",b.toFixed(3));document.getElementById("step-splitsize").className="akeeba-label--teal";akeeba.System.doAjax({act:"partsize",blocks:a},function(c){c?(document.getElementById("step-splitsize").className="akeeba-label--green",akeeba.Wizard.done()):akeeba.Wizard.partSize()},function(c){akeeba.Wizard.partSize()},!1,6E4)}};
akeeba.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("backup-complete").style.display="block"};akeeba.Loader.add(["akeeba.System","akeeba.Ajax","akeeba.Backup"],function(){akeeba.Wizard.boot()}); //# sourceMappingURL=ConfigurationWizard.min.map
