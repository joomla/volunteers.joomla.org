/*
 Copyright (c)2006-2020 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Extradirs&&(akeeba.Extradirs={});akeeba.Extradirs.render=function(a){var e=document.getElementById("ak_list_contents");e.innerHTML="";for(rootname in a)a.hasOwnProperty(rootname)&&akeeba.Extradirs.addRow(rootname,a[rootname],e);akeeba.Extradirs.addNewRecordButton(e)};
akeeba.Extradirs.addRow=function(a,e,m){var h=document.createElement("tr");h.className="ak_filter_row";akeeba.System.data.set(h,"rootuuid",a);akeeba.System.data.set(h,"def",e);a=document.createElement("td");var n=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),b=document.createElement("span");b.className="ak_filter_tab_icon_container akeeba-btn--red--mini delete";akeeba.System.addEventListener(b,"click",function(){var c={uuid:akeeba.System.data.get(this.parentNode.parentNode,
"rootuuid"),verb:"remove"};akeeba.Fsfilters.toggle(c,this,function(c,a){1==c.success&&(c=a.parentNode.parentNode,c.parentNode.removeChild(c))})});b.insertAdjacentHTML("beforeend",'<span class="akion-trash-a deletebutton ak-toggle-button"></span>');a.appendChild(b);b=document.createElement("span");b.className="ak_filter_tab_icon_container akeeba-btn--teal--mini";akeeba.System.addEventListener(b,"click",function(){var c=this.parentNode.parentNode;this.style.display="none";c.querySelector("span.delete").style.display=
"none";var a=this.parentNode,b=a.parentNode,d=document.createElement("span");d.className="ak_filter_tab_icon_container akeeba-btn--teal--mini save ak-toggle-button ak-stacked-button";d.insertAdjacentHTML("beforeend",'<span class="akion-checkmark"></span>');akeeba.System.addEventListener(d,"click",function(){var a=c.querySelector("input.folder_editor").value;a=trim(a);var b=c.querySelector("input.virtual_editor").value;b=trim(b);empty(b)&&(b=Math.uuid(8)+"-"+basename(a));var e=akeeba.System.data.get(c,
"def",",");e=e.split(",",2);if(""==a)if(""==e[0])akeeba.System.triggerEvent(this.parentNode.querySelector("span.cancel"),"click");else{var d=c.querySelector("span.delete");d.style.display="inline-block";akeeba.System.triggerEvent(d,"click")}else d={uuid:akeeba.System.data.get(c,"rootuuid"),root:a,data:b,verb:"set"},akeeba.Fsfilters.toggle(d,this,function(f,d){1==f.success&&(""==e[0]&&(f=d.parentNode.querySelector("span.editbutton"),akeeba.System.removeClass(f,"akion-plus"),akeeba.System.addClass(f,
"akion-edit ak-toggle-button"),akeeba.Extradirs.addNewRecordButton(m)),akeeba.System.data.set(c,"def",[a,b]),console.debug(c),c.querySelector("span.ak_directory").textContent=a,c.querySelector("span.ak_virtual").textContent=b,d.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block",f=d.parentNode.querySelector("span.cancel"),f.parentNode.removeChild(f),c.querySelector("span.delete").style.display="inline-block",d.parentNode.removeChild(d),f=c.querySelector("input.folder_editor"),
f.parentNode.removeChild(f),f=c.querySelector("input.virtual_editor"),f.parentNode.removeChild(f),f=c.querySelector("span.browse"),f.parentNode.removeChild(f),c.querySelector("span.ak_directory").style.display="inline-block",c.querySelector("span.ak_virtual").style.display="inline-block")},!1)});a.appendChild(d);d=document.createElement("span");d.className="ak_filter_tab_icon_container akeeba-btn--orange--mini cancel ak-toggle-button";d.insertAdjacentHTML("beforeend",'<span class="akion-close "></span>');
akeeba.System.addEventListener(d,"click",function(){this.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";var a=this.parentNode.querySelector("span.save");a.parentNode.removeChild(a);this.parentNode.removeChild(this);a=c.querySelector("input.folder_editor");a.parentNode.removeChild(a);a=c.querySelector("input.virtual_editor");a.parentNode.removeChild(a);a=c.querySelector("span.browse");a.parentNode.removeChild(a);c.querySelector("span.ak_directory").style.display=
"inline-block";c.querySelector("span.ak_virtual").style.display="inline-block";a=akeeba.System.data.get(c,"def",",");a=a.split(",",2);""!=a[0]&&(c.querySelector("span.delete").style.display="inline-block")});a.appendChild(d);a=akeeba.System.data.get(c,"def",",");a=a.split(",",2);b=b.querySelector("td.ak_filter_item");d=b.nextElementSibling;var g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("size","60");g.className="folder_editor";g.value=a[0];var e=document.createElement("span");
e.className="ak_filter_tab_icon_container akeeba-btn--dark--mini browse ak-toggle-button";e.insertAdjacentHTML("beforeend",'<span class="akion-folder"></span>');akeeba.System.addEventListener(e,"click",function(){var a=this.parentNode.querySelector("input.folder_editor"),b=trim(a.value);""==b&&(b="[ROOTPARENT]");akeeba.Configuration.onBrowser(b,a)});b.appendChild(g);b.appendChild(e);g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("size","60");g.className="virtual_editor";
g.value=a[1];d.appendChild(g);b.querySelector("span.ak_directory").style.display="none";d.querySelector("span.ak_virtual").style.display="none"});b.insertAdjacentHTML("beforeend",'<span class="akion-edit editbutton ak-toggle-button"></span>');n.appendChild(b);k.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_directory";b.textContent=e[0];k.appendChild(b);l.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_virtual";
b.textContent=e[1];l.appendChild(b);h.appendChild(a);h.appendChild(n);h.appendChild(k);h.appendChild(l);m.appendChild(h)};akeeba.Extradirs.addNewRecordButton=function(a){var e=Math.uuid();akeeba.Extradirs.addRow(e,["",""],a);a=document.getElementById("ak_list_contents").children;a=a[a.length-1].querySelectorAll("td");a[0].querySelector("span").style.display="none";a=a[1].querySelectorAll("span");a=a[a.length-1];akeeba.System.removeClass(a,"akion-edit");akeeba.System.addClass(a,"akion-plus ak-toggle-button")};
akeeba.System.documentReady(function(){var a=akeeba.System.getOptions("akeeba.IncludeFolders.guiData",null);null!==a&&(akeeba.Configuration.enablePopoverFor(document.querySelectorAll('[rel="popover"]')),akeeba.Extradirs.render(a))}); //# sourceMappingURL=IncludeFolders.min.map
