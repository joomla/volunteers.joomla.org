/*
 Copyright (c)2006-2022 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Regexfsfilters&&(akeeba.Regexfsfilters={currentRoot:null});akeeba.Regexfsfilters.activeRootChanged=function(){var a=document.getElementById("active_root");akeeba.Regexfsfilters.load(a.options[a.selectedIndex].value)};akeeba.Regexfsfilters.load=function(a){a={action:JSON.stringify({root:a,verb:"list"})};akeeba.System.doAjax(a,function(h){akeeba.Regexfsfilters.render(h)},null,!1,15E3)};
akeeba.Regexfsfilters.render=function(a){var h=document.getElementById("ak_list_contents");h.innerHTML="";for(var b=0;b<a.length;b++)akeeba.Regexfsfilters.addRow(a[b],h);akeeba.Regexfsfilters.addNewRow(h)};
akeeba.Regexfsfilters.addRow=function(a,h){var b=document.createElement("tr");h.appendChild(b);var e="akion-edit";""==a.item&&(e="akion-plus");var l=document.createElement("td"),q=document.createElement("span"),r=document.createElement("span");l.appendChild(q);l.appendChild(r);b.appendChild(l);q.className="table-icon-container akeeba-btn--teal--mini edit ak-toggle-button";q.insertAdjacentHTML("beforeend",'<span class="'+e+'"></span>');akeeba.System.addEventListener(q,"click",function(){var g=["regexfiles",
"regexdirectories","regexskipdirs","regexskipfiles"],k=document.createElement("select");k.setAttribute("name","type");k.className="type-select";for(var c=0;c<g.length;c++){var v=g[c],w=!1;v===a.type&&(w=!0);var t=document.createElement("option");w&&t.setAttribute("selected","selected");t.setAttribute("value",v);t.textContent=akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+String(v).toUpperCase().substr(5));k.appendChild(t)}b.querySelector("td.ak-type span").style.display="none";b.querySelector("td.ak-type").appendChild(k);
var m=document.createElement("input");m.setAttribute("type","text");m.setAttribute("name","item");m.setAttribute("size","100");m.value=a.item;b.querySelector("td.ak-item tt").style.display="none";b.querySelector("td.ak-item").appendChild(m);g=b.children[0];g.querySelector("span.edit").style.display="none";g.querySelector("span.delete").style.display="none";c=document.createElement("span");c.className="table-icon-container akeeba-btn--teal--mini save ak-toggle-button";c.insertAdjacentHTML("beforeend",
'<span class="akion-checkmark"></span>');akeeba.System.addEventListener(c,"click",function(){var d=b.children[0];d.querySelector("span.delete").style.display="none";var f=k.options[k.selectedIndex].value,n=m.value;if(""===trim(n))""===a.item?akeeba.System.triggerEvent(d.querySelector("span.cancel"),"click"):akeeba.System.triggerEvent(d.querySelector("span.delete"),"click");else if(a.item===n&&a.type===f)akeeba.System.triggerEvent(d.querySelector("span.cancel"),"click");else{d=document.getElementById("active_root");
var p={verb:"set",type:f,node:n,root:d.options[d.selectedIndex].value};akeeba.Fsfilters.toggle(p,this,function(x,y){x=""!=a.item&&""!=a.type&&(a.item!=n||a.type!=f);y=""==a.item||""==a.type;var z=b.children[0];if(""==a.item){var u=z.querySelector("span.edit").firstChild;u.className=u.className.replace("akion-plus","akion-edit")}p.type=a.type;p.node=a.item;a.type=f;a.item=n;u="COM_AKEEBA_FILEFILTERS_TYPE_"+String(a.type).toUpperCase().substr(5);b.querySelector("td.ak-type span").textContent=akeeba.System.Text._(u);
b.querySelector("td.ak-item tt").textContent=escapeHTML(a.item);akeeba.System.triggerEvent(z.querySelector("span.cancel"),"click");x?(p.verb="remove",akeeba.Fsfilters.toggle(p,this,function(A,B){},!1)):(a.item!=n||a.type!=f||y)&&akeeba.Regexfsfilters.addNewRow(h)},!1)}});g.appendChild(c);c=document.createElement("span");c.className="table-icon-container akeeba-btn--orange--mini cancel ak-toggle-button";c.insertAdjacentHTML("beforeend",'<span class="akion-close"></span>');akeeba.System.addEventListener(c,
"click",function(){var d=b.children[0],f=d.querySelector("span.save");f.parentNode.removeChild(f);f=d.querySelector("span.cancel");f.parentNode.removeChild(f);d.querySelector("span.edit").style.display="inline-block";""!=a.item&&(d.querySelector("span.delete").style.display="inline-block");k.parentNode.removeChild(k);b.querySelector("td.ak-type span").style.display="inline-block";m.parentNode.removeChild(m);b.querySelector("td.ak-item tt").style.display="inline"});g.appendChild(c)});r.className="table-icon-container akeeba-btn--red--mini delete ak-toggle-button";
r.insertAdjacentHTML("beforeend",'<span class="akion-trash-a"></span>');akeeba.System.addEventListener(r,"click",function(){var g=document.getElementById("active_root");akeeba.Fsfilters.toggle({verb:"remove",type:a.type,node:a.item,root:g.options[g.selectedIndex].value},this,function(k,c){b.parentNode.removeChild(b);""==a.item&&akeeba.Regexfsfilters.addNewRow(h)},!1)});""==a.item&&(l.querySelector("span.delete").style.display="none");e="COM_AKEEBA_FILEFILTERS_TYPE_"+String(a.type).toUpperCase().substr(5);
e=akeeba.System.Text._(e);""==a.type&&(e="");l=document.createElement("td");l.className="ak-type";l.innerHTML="<span>"+e+"</span>";b.appendChild(l);e=document.createElement("td");e.className="ak-item";e.innerHTML="<tt>"+(null==a.item?"":escapeHTML(a.item))+"</tt>";b.appendChild(e)};akeeba.Regexfsfilters.addNewRow=function(a){akeeba.Regexfsfilters.addRow({type:"",item:""},a)};
akeeba.Loader.add(["akeeba.System","akeeba.Ajax","akeeba.Fsfilters"],function(){akeeba.System.addEventListener("active_root","change",akeeba.Regexfsfilters.activeRootChanged);akeeba.Regexfsfilters.render(akeeba.System.getOptions("akeeba.RegExFileFilter.guiData",{}))}); //# sourceMappingURL=RegExFileFilter.min.map
