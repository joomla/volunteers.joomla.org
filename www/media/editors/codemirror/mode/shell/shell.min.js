!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})((function(a){"use strict";a.defineMode("shell",(function(){function b(a,b){for(var c=0;c<b.length;c++)h[b[c]]=a}function c(a,b){if(a.eatSpace())return null;var c=a.sol(),e=a.next();if("\\"===e)return a.next(),null;if("'"===e||'"'===e||"`"===e)return b.tokens.unshift(d(e,"`"===e?"quote":"string")),g(a,b);if("#"===e)return c&&a.eat("!")?(a.skipToEnd(),"meta"):(a.skipToEnd(),"comment");if("$"===e)return b.tokens.unshift(l),g(a,b);if("+"===e||"="===e)return"operator";if("-"===e)return a.eat("-"),a.eatWhile(/\w/),"attribute";if("<"==e){if(a.match("<<"))return"operator";var i=a.match(/^<-?\s*['"]?([^'"]*)['"]?/);if(i)return b.tokens.unshift(f(i[1])),"string-2"}if(/\d/.test(e)&&(a.eatWhile(/\d/),a.eol()||!/\w/.test(a.peek())))return"number";a.eatWhile(/[\w-]/);var j=a.current();return"="===a.peek()&&/\w+/.test(j)?"def":h.hasOwnProperty(j)?h[j]:null}function d(a,b){var c="("==a?")":"{"==a?"}":a;return function(f,h){for(var i,j=!1;null!=(i=f.next());){if(i===c&&!j){h.tokens.shift();break}if("$"===i&&!j&&"'"!==a&&f.peek()!=c){j=!0,f.backUp(1),h.tokens.unshift(l);break}if(!j&&a!==c&&i===a)return h.tokens.unshift(d(a,b)),g(f,h);if(!j&&/['"]/.test(i)&&!/['"]/.test(a)){h.tokens.unshift(e(i,"string")),f.backUp(1);break}j=!j&&"\\"===i}return b}}function e(a,b){return function(c,e){return e.tokens[0]=d(a,b),c.next(),g(c,e)}}function f(a){return function(b,c){return b.sol()&&b.string==a&&c.tokens.shift(),b.skipToEnd(),"string-2"}}function g(a,b){return(b.tokens[0]||c)(a,b)}var h={},i=["true","false"],j=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"],k=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];a.registerHelper("hintWords","shell",i.concat(j,k)),b("atom",i),b("keyword",j),b("builtin",k);var l=function(a,b){b.tokens.length>1&&a.eat("$");var c=a.next();return/['"({]/.test(c)?(b.tokens[0]=d(c,"("==c?"quote":"{"==c?"def":"string"),g(a,b)):(/\d/.test(c)||a.eatWhile(/\w/),b.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(a,b){return g(a,b)},closeBrackets:"()[]{}''\"\"``",lineComment:"#",fold:"brace"}})),a.defineMIME("text/x-sh","shell"),a.defineMIME("application/x-sh","shell")}));