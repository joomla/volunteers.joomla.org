/*
 Akeeba Frontend Framework (FEF)

 @package   fef
 @copyright (c) 2017-2021 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
 Math.uuid.js (v1.4)
 http://www.broofa.com
 mailto:robert@broofa.com

 Copyright (c) 2009 Robert Kieffer
 Dual licensed under the MIT and GPL licenses.

 Usage: Math.uuid()
*/
window.akeeba=window.akeeba||{};"undefined"===typeof akeeba.System&&(akeeba.System={},akeeba.System.documentReady=function(a,b){},akeeba.System.notification={hasDesktopNotification:!1,iconURL:""},akeeba.System.params={AjaxURL:"",errorCallback:akeeba.System.modalErrorHandler,password:"",errorDialogId:"errorDialog",errorDialogMessageId:"errorDialogPre"},akeeba.System.modalDialog=null,akeeba.System.optionsStorage=null);
"undefined"===typeof Math.uuid&&(Math.uuid=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(b,c){var d=[];c=c||a.length;if(b)for(var e=0;e<b;e++)d[e]=a[0|Math.random()*c];else for(d[8]=d[13]=d[18]=d[23]="-",d[14]="4",e=0;36>e;e++)d[e]||(b=0|16*Math.random(),d[e]=a[19===e?b&3|8:b]);return d.join("")}}());akeeba.System.forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])};
akeeba.System.array_merge=function(){var a=Array.prototype.slice.call(arguments),b={},c,d;var e=!0;for(d=0;d<a.length;d++)if(!(a[d]instanceof Array)){e=!1;break}if(e){e=[];for(d=0;d<a.length;d++)e=e.concat(a[d]);return e}var f;for(f=d=0;d<a.length;d++)if(a[d]instanceof Array)for(e=0;e<a[d].length;e++)b[f++]=a[d][e];else for(c in a[d])a[d].hasOwnProperty(c)&&(parseInt(c,10)+""===c?b[f++]=a[d][c]:b[c]=a[d][c]);return b};
akeeba.System.array_diff=function(a){var b={},c=arguments.length,d="",e,f="";a:for(d in a)for(e=1;e<c;e++){var l=arguments[e];for(f in l)if(l[f]===a[d])continue a;b[d]=a[d]}return b};akeeba.System.findElement=function(a){if("undefined"===typeof a||null===a)return null;"string"===typeof a&&(a=document.getElementById(a));return"object"===typeof a&&a instanceof Element?a:null};
akeeba.System.getOptions=function(a,b){"undefined"==typeof b&&(b=null);akeeba.System.optionsStorage||(akeeba.System.loadJoomlaOptions(),akeeba.System.loadOptions());return void 0!==akeeba.System.optionsStorage[a]?akeeba.System.optionsStorage[a]:"undefined"!==typeof Joomla&&"undefined"!==typeof Joomla.getOptions?Joomla.getOptions(a,b):b};
akeeba.System.loadJoomlaOptions=function(){var a=document.querySelectorAll(".joomla-script-options");akeeba.System.iterateNodes(a,function(b){if(!akeeba.System.hasClass(b,"akeebaImported")){var c;str=b.text||b.textContent;(c=JSON.parse(str))&&akeeba.System.loadOptions(c);akeeba.System.addClass(b,"akeebaImported")}})};
akeeba.System.loadOptions=function(a){if(!a){for(var b=document.querySelectorAll(".akeeba-script-options.new"),c,d,e=0,f=0,l=b.length;f<l;f++){d=b[f];c=d.text||d.textContent;if(c=JSON.parse(c))akeeba.System.loadOptions(c),e++;akeeba.System.removeClass(d,"new");akeeba.System.addClass(d,"loaded")}if(e)return}if(!akeeba.System.optionsStorage)akeeba.System.optionsStorage=a||{};else if(a)for(var g in a)a.hasOwnProperty(g)&&(akeeba.System.optionsStorage[g]=a[g])};
akeeba.System.defaultErrorHandler=function(a){null!=a&&"undefined"!=typeof a&&alert("An error has occurred\n"+a)};
akeeba.System.modalErrorHandler=function(a){var b=akeeba.System.getOptions("akeeba.System.params.errorDialogId",akeeba.System.params.errorDialogId),c=akeeba.System.getOptions("akeeba.System.params.errorDialogMessageId",akeeba.System.params.errorDialogMessageId);b=document.getElementById(b);var d="error";null!=b&&(document.getElementById(c).innerHTML=a,d=b.innerHTML);akeeba.Modal.open({content:d,width:"80%"})};
akeeba.System.doAjax=function(a,b,c,d,e){null==d&&(d=!0);var f=(new Date).getTime()/1E3,l=parseInt(String(f),10);a._cacheBustingJunk=Math.round(1E3*(f-l))/1E3;null==e&&(e=6E5);f=akeeba.System.getOptions("akeeba.System.params.AjaxURL",akeeba.System.params.AjaxURL);a.hasOwnProperty("ajaxURL")&&(f=a.ajaxURL,delete a.url);var g=!0;a.hasOwnProperty("useTripleHash")&&(g=a.useTripleHash,delete a.useTripleHash);a.hasOwnProperty("parseResponseAsJSON")&&delete a.parseResponseAsJSON;null==c&&(c=akeeba.System.getOptions("akeeba.System.params.errorCallback",
akeeba.System.params.errorCallback));null==c&&(c=akeeba.System.defaultErrorHandler);var p={type:"POST",url:f,cache:!1,data:a,timeout:e,success:function(h){if(g){var m=h.indexOf("###");if(-1===m){h=akeeba.System.sanitizeErrorMessage(h);c("Invalid AJAX data: "+h);return}}var k=h;g&&(0!==m&&(k=h.substr(m)),k=k.substr(3),m=k.lastIndexOf("###"),k=k.substr(0,m));try{var n=JSON.parse(k)}catch(q){k=akeeba.System.sanitizeErrorMessage(k);h=q.message+"\n<br/>\n<pre>\n"+k+"\n</pre>";c(h);return}b(n)},error:function(h,
m,k){k=h.responseText?h.responseText:"";var n="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+h.status+" ("+h.statusText+")<br/>";n=n+"Internal status: "+m+"<br/>XHR ReadyState: "+h.readyState+"<br/>";n=n+"Raw server response:<br/>"+akeeba.System.sanitizeErrorMessage(k);c(n)}};d?akeeba.Loader.add("akeeba.Ajax",function(){akeeba.Ajax.enqueue(p)}):akeeba.Loader.add("akeeba.Ajax",function(){akeeba.Ajax.ajax(p)})};
akeeba.System.sanitizeErrorMessage=function(a){-1<a.indexOf("<script")&&(a="(HTML containing script tags)");return a};akeeba.System.notification.askPermission=function(){akeeba.System.getOptions("akeeba.System.notification.hasDesktopNotification",akeeba.System.notification.hasDesktopNotification)&&void 0!==window.Notification&&"default"===window.Notification.permission&&window.Notification.requestPermission()};
akeeba.System.notification.notify=function(a,b,c){void 0!==window.Notification&&"granted"===window.Notification.permission&&(void 0===c&&(c=5E3),void 0===b&&(b=""),a=new window.Notification(a,{body:b,icon:akeeba.System.getOptions("akeeba.System.notification.iconURL",akeeba.System.notification.iconURL)}),0<c&&setTimeout(function(d){return function(){d.close()}}(a),c))};
akeeba.System.data=function(){var a=0,b={};return{set:function(c,d,e){if(c.dataset)c.dataset[d]=e,null==e&&delete c.dataset[d];else{if(void 0===c.myCustomDataTag){var f=a++;c.myCustomDataTag=f}"undefined"==typeof b[f]&&(b[f]={});b[f][d]=e;var l="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();c.setAttribute&&c.setAttribute(l,e);if(null==e)try{delete b[f][d],c.removeAttribute(l)}catch(g){b[f][d]=null}}},get:function(c,d,e){if(c.dataset)return"undefined"==typeof c.dataset[d]&&(c.dataset[d]=e),c.dataset[d];
"undefined"==typeof e&&(e=null);"undefined"==typeof b[c.myCustomDataTag]&&(b[c.myCustomDataTag]={});var f="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();"undefined"!==typeof c[f]&&(b[c.myCustomDataTag][d]=c[f]);"undefined"==typeof b[c.myCustomDataTag][d]&&this.set(c,d,e);return b[c.myCustomDataTag][d]}}}();
akeeba.System.addEventListener=function(a,b,c){function d(e){var f=c.apply(this,arguments);!1===f&&(e.stopPropagation()&&e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1);return f}(a=akeeba.System.findElement(a))&&(a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,function(){var e=c.call(a,window.event);!1===e&&(window.event.returnValue=!1,window.event.cancelBubble=!0);return e}))};
akeeba.System.removeEventListener=function(a,b,c){(a=akeeba.System.findElement(a))&&(a.removeEventListener?a.removeEventListener(b,c):a.detachEvent("on"+b,c))};akeeba.System.triggerEvent=function(a,b){if(a=akeeba.System.findElement(a))if("click"===b&&"function"===typeof a.click)a.click();else if(document.fireEvent&&"undefined"==typeof window.Event)a.fireEvent("on"+b);else{var c=document.createEvent("Event");c.initEvent(b,!0,!0);a.dispatchEvent(c)}};
(function(a,b){function c(){if(!f){f=!0;for(var g=0;g<e.length;g++)e[g].fn.call(window,e[g].ctx);e=[]}}function d(){"complete"===document.readyState&&c()}b=b||akeeba.System;var e=[],f=!1,l=!1;b[a||"documentReady"]=function(g,p){f?setTimeout(function(){g(p)},1):(e.push({fn:g,ctx:p}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(c,1):l||(l=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",
c,!1)):(document.attachEvent("onreadystatechange",d),window.attachEvent("onload",c))))}})("documentReady",akeeba.System);akeeba.System.addClass=function(a,b){if(a){try{var c=a.className.split(" ")}catch(d){return}"string"==typeof b&&(b=b.split(" "));c=akeeba.System.array_merge(c,b);a.className="";for(property in c)c.hasOwnProperty(property)&&(a.className+=c[property]+" ");a.className.trim&&(a.className=a.className.trim())}};
akeeba.System.removeClass=function(a,b){if(a){try{var c=a.className.split(" ")}catch(d){return}"string"==typeof b&&(b=b.split(" "));c=akeeba.System.array_diff(c,b);a.className="";for(property in c)c.hasOwnProperty(property)&&(a.className+=c[property]+" ");a.className.trim&&(a.className=a.className.trim())}};akeeba.System.hasClass=function(a,b){if(!a)return!1;try{var c=a.className.split(" ")}catch(d){return!1}for(i=0;i<c.length;i++)if(c[i]===b)return!0;return!1};
akeeba.System.toggleClass=function(a,b){akeeba.System.hasClass(a,b)?akeeba.System.removeClass(a,b):akeeba.System.addClass(a,b)};akeeba.System.tableOrdering=function(a,b,c,d){"undefined"===typeof d&&(d=document.getElementById("adminForm"));d.filter_order.value=a;d.filter_order_Dir.value=b;akeeba.System.submitForm(c,d)};
akeeba.System.submitForm=function(a,b,c){b||(b=document.getElementById("adminForm"));a&&(b.task.value=a);b.noValidate=!c;c?b.hasAttribute("novalidate")&&b.removeAttribute("novalidate"):b.setAttribute("novalidate","");a=document.createElement("input");a.style.display="none";a.type="submit";b.appendChild(a);a.click();b.removeChild(a)};
akeeba.System.orderTable=function(){var a=document.getElementById("sortTable"),b=document.getElementById("directionTable");a=a.options[a.selectedIndex].value;var c="asc";a===akeeba.System.getOptions("akeeba.System.tableOrder","asc")&&(c=b.options[b.selectedIndex].value);akeeba.System.tableOrdering(a,c)};
akeeba.System.iterateNodes=function(a,b,c){if("function"==typeof b&&("string"===typeof a&&(a=document.querySelectorAll(a)),0!==a.length)){var d;for(d=0;d<a.length;d++){var e=a[d];"undefined"!==typeof c?b(e,c):b(e)}}};
akeeba.System.assignDefaultErrorHandler=function(){akeeba.System.params.errorCallback=akeeba.System.modalErrorHandler;if("undefined"===typeof akeeba.Modal)akeeba.System.params.errorCallback=akeeba.System.defaultErrorHandler;else{var a=akeeba.System.getOptions("akeeba.System.params.errorDialogId",akeeba.System.params.errorDialogId),b=akeeba.System.getOptions("akeeba.System.params.errorDialogMessageId",akeeba.System.params.errorDialogMessageId);if(""===a||null===a||""===b||null===b)akeeba.System.params.errorCallback=
akeeba.System.defaultErrorHandler;else if(a=document.getElementById(a),b=document.getElementById(b),null===a||null===b)akeeba.System.params.errorCallback=akeeba.System.defaultErrorHandler}};
akeeba.System.documentReady(function(){akeeba.System.assignDefaultErrorHandler();akeeba.System.iterateNodes(".akeebaGridViewCheckAll",function(a){akeeba.System.addEventListener(a,"click",function(){Joomla.checkAll(this)})});akeeba.System.iterateNodes(".akeebaGridViewOrderTable",function(a){akeeba.System.addEventListener(a,"change",akeeba.System.orderTable)});akeeba.System.iterateNodes(".akeebaGridViewAutoSubmitOnChange",function(a){akeeba.System.addEventListener(a,"change",function(){akeeba.System.submitForm()})})});
akeeba.System.Text={strings:{},_:function(a,b){["akeeba.text","joomla.jtext"].forEach(function(c){var d=akeeba.System.getOptions(c);d&&(akeeba.System.Text.load(d),d={},d[c]=null,akeeba.System.loadOptions(d))});b=void 0===b?"":b;a=a.toUpperCase();return void 0!==akeeba.System.Text.strings[a]?akeeba.System.Text.strings[a]:"undefined"!=typeof Joomla.JText?Joomla.JText._(a,b):"undefined"!=typeof Joomla.Text?Joomla.Text._(a,b):b},load:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.strings[b.toUpperCase()]=
a[b]);return this}};
akeeba.System.CommonEvents={onEventSubmit:function(a){var b=akeeba.System.data.get(a.currentTarget,"akeebasubmittarget",""),c=document.forms.adminForm?document.forms.adminForm:null;""!==b&&(c=document.getElementById(b));if(!c)return!0;c.submit();a.preventDefault();return!1},onClickConfirm:function(a){var b=akeeba.System.data.get(a.currentTarget,"akeebaconfirmmessage","");if(""===b||confirm(Joomla.Text._(b)))return!0;a.preventDefault();return!1},onEventOrderTable:function(a){a.preventDefault();Joomla.orderTable();
return!1},init:function(){akeeba.System.iterateNodes(".akeebaCommonEventsOnChangeSubmit",function(a){akeeba.System.addEventListener(a,"change",akeeba.System.CommonEvents.onEventSubmit)});akeeba.System.iterateNodes(".akeebaCommonEventsOnClickSubmit",function(a){akeeba.System.addEventListener(a,"click",akeeba.System.CommonEvents.onEventSubmit)});akeeba.System.iterateNodes(".akeebaCommonEventsOnClickConfirm",function(a){akeeba.System.addEventListener(a,"click",akeeba.System.CommonEvents.onClickConfirm)});
akeeba.System.iterateNodes(".akeebaCommonEventsOnChangeOrderTable",function(a){akeeba.System.addEventListener(a,"change",akeeba.System.CommonEvents.onEventOrderTable)})}};akeeba.System.CommonEvents.init(); //# sourceMappingURL=System.map
