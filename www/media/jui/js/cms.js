Joomla=window.Joomla||{};!function(document,Joomla){"use strict";Joomla.setcollapse=function(url,name,height){if(!document.getElementById("collapse-"+name)){document.getElementById("container-collapse").innerHTML='<div class="collapse fade" id="collapse-'+name+'"><iframe class="iframe" src="'+url+'" height="'+height+'" width="100%"></iframe></div>'}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0){from+=len}for(;from<len;from++){if(from in this&&this[from]===elt){return from}}return-1}}window.jQuery&&function($){function linkedoptions(target,animate){var showfield=true,jsondata=target.data("showon")||[],itemval,condition,fieldName,$fields;for(var j=0,lj=jsondata.length;j<lj;j++){condition=jsondata[j]||{};fieldName=condition.field;$fields=$('[name="'+fieldName+'"], [name="'+fieldName+'[]"]');condition["valid"]=0;$fields.each(function(){var $field=$(this);if(["checkbox","radio"].indexOf($field.attr("type"))!==-1){if(!$field.prop("checked")){return}itemval=$field.val()}else{itemval=$field.val();if(itemval==null&&$field.prop("tagName").toLowerCase()=="select"){itemval=[]}}if(!(typeof itemval==="object")){itemval=JSON.parse('["'+itemval+'"]')}for(var i in itemval){if(!itemval.propertyIsEnumerable(i)){continue}if(jsondata[j]["sign"]=="="&&jsondata[j]["values"].indexOf(itemval[i])!==-1){jsondata[j]["valid"]=1}if(jsondata[j]["sign"]=="!="&&jsondata[j]["values"].indexOf(itemval[i])===-1){jsondata[j]["valid"]=1}}});if(condition["op"]===""){if(condition["valid"]===0){showfield=false}}else{if(condition["op"]==="AND"&&condition["valid"]+jsondata[j-1]["valid"]<2){showfield=false;condition["valid"]=0}if(condition["op"]==="OR"&&condition["valid"]+jsondata[j-1]["valid"]>0){showfield=true;condition["valid"]=1}}}if(target.is("option")){target.toggle(showfield);target.attr("disabled",showfield?false:true);var parent=target.parent();if($("#"+parent.attr("id")+"_chzn").length){parent.trigger("liszt:updated");parent.trigger("chosen:updated")}}animate=animate&&!target.hasClass("no-animation")&&!target.hasClass("no-animate")&&!target.find(".no-animation, .no-animate").length;if(animate){showfield?target.slideDown():target.slideUp();return}target.toggle(showfield)}function setUpShowon(container){container=container||document;var $showonFields=$(container).find("[data-showon]");for(var is=0,ls=$showonFields.length;is<ls;is++){(function($target){if($target[0].hasAttribute("data-showon-initialised")){return}$target[0].setAttribute("data-showon-initialised","");var jsondata=$target.data("showon")||[],field,$fields=$();for(var ij=0,lj=jsondata.length;ij<lj;ij++){field=jsondata[ij]["field"];$fields=$fields.add($('[name="'+field+'"], [name="'+field+'[]"]'))}linkedoptions($target);$fields.on("change keyup",function(){linkedoptions($target,true)})})($($showonFields[is]))}}if(!Joomla.Showon){Joomla.Showon={initialise:setUpShowon}}$(document).ready(function(){Joomla.Showon.initialise(document);$(document).on("subform-row-add joomla:updated",function(event,row){var target=row;if(event.type==="joomla:updated"){target=event.target}if($(target).hasClass("subform-repeatable-group")){var $row=$(target),$elements=$row.find("[data-showon]"),baseName=$row.data("baseName"),group=$row.data("group"),search=new RegExp("\\["+baseName+"\\]\\["+baseName+"X\\]","g"),replace="["+baseName+"]["+group+"]",$elm,showon;for(var i=0,l=$elements.length;i<l;i++){$elm=$($elements[i]);showon=$elm.attr("data-showon").replace(search,replace);$elm.attr("data-showon",showon)}}Joomla.Showon.initialise(target)})})}(jQuery)}(document,Joomla);
